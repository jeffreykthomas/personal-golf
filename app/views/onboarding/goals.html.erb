<div class="min-h-screen bg-dark-bg px-6 py-12">
  <div class="max-w-md mx-auto">
    <!-- Back button -->
    <%= link_to onboarding_skill_level_path, 
        class: "inline-flex items-center text-gray-400 hover:text-white mb-8 transition-colors" do %>
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      Back
    <% end %>

    <h2 class="text-title mb-2 text-center">What are your goals?</h2>
    <p class="text-body text-center mb-8">Select all that apply - we'll tailor content to help you achieve them</p>

    <%= form_with model: @user, 
        url: onboarding_goals_path, 
        method: :patch,
        local: false,
        data: { 
          controller: "goals-selector",
          action: "submit->goals-selector#submit"
        } do |f| %>
      
      <div class="space-y-3 mb-8">
        <% goal_options = [
          { value: 'lower_scores', label: 'Lower my scores', icon: '📊' },
          { value: 'consistency', label: 'Play more consistently', icon: '🎯' },
          { value: 'technique', label: 'Learn proper technique', icon: '🏌️' },
          { value: 'enjoyment', label: 'Enjoy the game more', icon: '😊' },
          { value: 'fitness', label: 'Improve golf fitness', icon: '💪' },
          { value: 'mental_game', label: 'Master the mental game', icon: '🧠' }
        ] %>
        
        <% goal_options.each do |goal| %>
          <label class="flex items-center space-x-3 cursor-pointer group">
            <%= check_box_tag 'user[goals][]', 
                goal[:value], 
                @user.goals&.include?(goal[:value]),
                class: "sr-only peer",
                data: { 
                  action: "change->goals-selector#toggleGoal",
                  goals_selector_target: "checkbox"
                } %>
            
            <div class="flex-1 bg-dark-card border border-dark-border rounded-xl p-4 transition-all duration-200 group-hover:border-golf-green-500/30 peer-checked:border-golf-green-500 peer-checked:bg-dark-surface">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <span class="text-2xl"><%= goal[:icon] %></span>
                  <span class="text-white font-medium"><%= goal[:label] %></span>
                </div>
                
                <!-- Checkbox -->
                <div class="w-5 h-5 border-2 border-gray-500 rounded flex items-center justify-center peer-checked:border-golf-green-500 peer-checked:bg-golf-green-500 transition-all">
                  <svg class="w-3 h-3 text-dark-bg hidden peer-checked:block" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
              </div>
            </div>
          </label>
        <% end %>
      </div>

      <!-- Selected count indicator -->
      <div class="text-center mb-6">
        <p class="text-caption">
          <span data-goals-selector-target="count">0</span> goals selected
        </p>
      </div>

      <!-- Continue button -->
      <%= f.submit "Continue", 
          class: "w-full btn-primary cursor-pointer",
          data: { 
            goals_selector_target: "submitButton",
            goals_selector_action: "submit"
          } %>
          
      <!-- Skip option -->
      <%= link_to "Skip for now", 
          onboarding_first_tip_path,
          class: "block text-center mt-4 text-gray-400 hover:text-white transition-colors text-sm" %>
    <% end %>

    <!-- Progress indicator -->
    <div class="flex justify-center space-x-2 mt-8">
      <div class="w-3 h-3 bg-gray-600 rounded-full"></div>
      <div class="w-3 h-3 bg-gray-600 rounded-full"></div>
      <div class="w-3 h-3 bg-golf-green-500 rounded-full"></div>
    </div>
  </div>
</div>