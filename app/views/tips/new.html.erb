<div class="container mx-auto p-4 md:p-6 lg:p-8">
  <h2 class="text-heading mb-4">Create Tip</h2>

  <% if @tip.errors.any? %>
    <div class="mb-4 p-4 border border-red-500/30 rounded-xl bg-red-500/10">
      <h3 class="text-red-400 font-semibold mb-2">Please fix the following:</h3>
      <ul class="list-disc list-inside text-red-300">
        <% @tip.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with model: @tip, url: tips_path, class: "space-y-4" do |f| %>
    <div>
      <%= f.label :title, class: 'block text-caption mb-1' %>
      <%= f.text_field :title, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
    </div>

    <div>
      <%= f.label :content, class: 'block text-caption mb-1' %>
      <%= f.text_area :content, rows: 6, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <%= f.label :category_id, 'Category', class: 'block text-caption mb-1' %>
        <%= f.collection_select :category_id, @categories, :id, :name, {}, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
      </div>
      <div>
        <%= f.label :youtube_url, class: 'block text-caption mb-1' %>
        <%= f.url_field :youtube_url, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <%= f.label :phase, class: 'block text-caption mb-1' %>
        <%= f.select :phase, Tip.phases.keys.map { |k| [k.humanize, k] }, {}, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
      </div>
      <div>
        <%= f.label :skill_level, class: 'block text-caption mb-1' %>
        <%= f.select :skill_level, Tip.skill_levels.keys.map { |k| [k.humanize, k] }, {}, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <%= f.label :course_id, 'Course (for Course Tips)', class: 'block text-caption mb-1' %>
        <%= f.collection_select :course_id, @courses, :id, :name, { include_blank: true }, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
      </div>
      <div>
        <%= f.label :hole_number, 'Hole (1-18)', class: 'block text-caption mb-1' %>
        <%= f.number_field :hole_number, in: 1..18, class: 'w-full rounded-lg bg-dark-card border border-dark-border p-3 text-white' %>
      </div>
    </div>

    <div>
      <label class="block text-caption mb-2">Tags (optional)</label>
      <div class="flex flex-wrap gap-2">
        <% Tip.allowed_tags.each do |tag| %>
          <label class="inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-dark-card border border-dark-border cursor-pointer">
            <%= check_box_tag 'tip[tags][]', tag, @tip.tags.include?(tag), class: 'form-checkbox' %>
            <span class="text-caption"><%= tag.tr('_', ' ') %></span>
          </label>
        <% end %>
      </div>
    </div>

    <div class="flex items-center gap-3">
      <%= f.submit 'Create Tip', class: 'btn-primary' %>
      <% if @tip.course_id.present? && @tip.hole_number.present? %>
        <%= link_to 'Back to Hole', hole_course_path(@tip.course_id, number: @tip.hole_number), class: 'btn-secondary' %>
      <% end %>
    </div>
  <% end %>
</div>


